{"version":3,"file":"react-native-media-controls.cjs.development.js","sources":["../../src/MediaControls.style.ts","../../src/constants/playerStates.ts","../../src/utils.ts","../../src/Controls.tsx","../../src/Slider.tsx","../../src/Toolbar.tsx","../../src/MediaControls.tsx"],"sourcesContent":["import { StyleSheet } from \"react-native\";\r\n\r\nconst white = \"#fff\";\r\n\r\nexport default StyleSheet.create({\r\n  container: {\r\n    alignItems: \"center\",\r\n    bottom: 0,\r\n    flex: 1,\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n    left: 0,\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 13,\r\n    position: \"absolute\",\r\n    right: 0,\r\n    top: 0,\r\n  },\r\n  controlsRow: {\r\n    alignItems: \"center\",\r\n    alignSelf: \"stretch\",\r\n    flex: 1,\r\n    justifyContent: \"space-evenly\",\r\n  },\r\n  fullScreenContainer: {\r\n    alignItems: \"center\",\r\n    alignSelf: \"stretch\",\r\n    justifyContent: \"flex-end\",\r\n    paddingLeft: 20,\r\n    marginBottom: 10,\r\n  },\r\n  playButton: {\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    justifyContent: \"center\",\r\n    width: 50,\r\n  },\r\n  playIcon: {\r\n    height: 22,\r\n    resizeMode: \"contain\",\r\n    width: 22,\r\n  },\r\n  progressColumnContainer: {\r\n    flex: 1,\r\n  },\r\n  progressContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n    alignItems: \"flex-end\",\r\n  },\r\n  progressSlider: {\r\n    alignSelf: \"stretch\",\r\n  },\r\n  replayIcon: {\r\n    height: 20,\r\n    resizeMode: \"stretch\",\r\n    width: 25,\r\n  },\r\n  thumb: {\r\n    backgroundColor: \"#f80e37\",\r\n    borderRadius: 50,\r\n    borderWidth: 3,\r\n    height: 20,\r\n    width: 20,\r\n  },\r\n  timeRow: {\r\n    alignSelf: \"stretch\",\r\n  },\r\n  timerLabel: {\r\n    color: white,\r\n    fontSize: 12,\r\n  },\r\n  timerLabelsContainer: {\r\n    alignSelf: \"stretch\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: -7,\r\n  },\r\n  toolbar: {\r\n    flexDirection: \"row\",\r\n    flex: 1,\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  toolbarRow: {\r\n    alignItems: \"flex-start\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-start\",\r\n  },\r\n  track: {\r\n    borderRadius: 1,\r\n    height: 5,\r\n  },\r\n});\r\n","enum PLAYER_STATES {\r\n  PLAYING = 0,\r\n  PAUSED = 1,\r\n  ENDED = 2,\r\n}\r\n\r\nexport { PLAYER_STATES };\r\n","import { PLAYER_STATES } from \"./constants/playerStates\";\r\n\r\nexport const humanizeVideoDuration = (seconds: number) => {\r\n  const [begin, end] = seconds >= 3600 ? [11, 8] : [14, 5];\r\n  const date = new Date(0);\r\n\r\n  date.setSeconds(seconds);\r\n  return date.toISOString().substr(begin, end);\r\n};\r\n\r\nexport const noop = () => {};\r\n\r\nexport const getPlayerStateIcon = (playerState: PLAYER_STATES) => {\r\n  switch (playerState) {\r\n    case PLAYER_STATES.PAUSED:\r\n      return require(\"./assets/ic_play.png\");\r\n    case PLAYER_STATES.PLAYING:\r\n      return require(\"./assets/ic_pause.png\");\r\n    case PLAYER_STATES.ENDED:\r\n      return require(\"./assets/ic_replay.png\");\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { TouchableOpacity, View, ActivityIndicator, Image } from \"react-native\";\r\nimport styles from \"./MediaControls.style\";\r\nimport { getPlayerStateIcon } from \"./utils\";\r\nimport { Props } from \"./MediaControls\";\r\nimport { PLAYER_STATES } from \"./constants/playerStates\";\r\n\r\nconst rewindIcon = require(\"./assets/ic_rw.png\");\r\nconst fastforwardIcon = require(\"./assets/ic_ff.png\");\r\n\r\ntype ControlsProps = Pick<\r\n  Props, \r\n  | \"isLoading\" \r\n  | \"playerState\" \r\n  | \"onReplay\" \r\n  | \"duration\" \r\n  | \"progress\"\r\n  | \"onSeek\"\r\n  | \"live\"\r\n> & {\r\n  onPause: () => void;\r\n};\r\n\r\nconst Controls = (props: ControlsProps) => {\r\n  const { \r\n    isLoading, \r\n    playerState, \r\n    onReplay, \r\n    onPause,\r\n    duration,\r\n    progress,\r\n    onSeek,\r\n    live,\r\n  } = props;\r\n  const icon = getPlayerStateIcon(playerState);\r\n  const pressAction = playerState === PLAYER_STATES.ENDED ? onReplay : onPause;\r\n  const ffTenSeconds = () => {\r\n    const availableDuration = duration - progress;\r\n    if (availableDuration < 10) {\r\n      onSeek(availableDuration);\r\n    } else {\r\n      onSeek(progress + 10);\r\n    }\r\n  };\r\n  const rwTenSeconds = () => {\r\n    onSeek(progress < 10 ? progress : 10);\r\n  };\r\n\r\n  const content = isLoading ? (\r\n    <ActivityIndicator size=\"large\" color=\"#FFF\" />\r\n  ) : (\r\n    <>\r\n      {!live &&\r\n        <TouchableOpacity\r\n          style={[styles.playButton]}\r\n          onPress={rwTenSeconds}\r\n          accessibilityLabel={\"Rewind 10 seconds\"}\r\n          accessibilityHint={\"Rewinds the video 10 seconds\"}\r\n        >\r\n          <Image source={rewindIcon} style={styles.playIcon} />\r\n        </TouchableOpacity>\r\n      }\r\n      <TouchableOpacity\r\n        style={[styles.playButton]}\r\n        onPress={pressAction}\r\n        accessibilityLabel={PLAYER_STATES.PAUSED ? \"Tap to Play\" : \"Tap to Pause\"}\r\n        accessibilityHint={\"Plays and Pauses the Video\"}\r\n      >\r\n        <Image source={icon} style={styles.playIcon} />\r\n      </TouchableOpacity>\r\n      {!live &&\r\n        <TouchableOpacity\r\n          style={[styles.playButton]}\r\n          onPress={ffTenSeconds}\r\n          accessibilityLabel={\"Fast-forward 10 seconds\"}\r\n          accessibilityHint={\"Fast-forwards the video 10 seconds\"}\r\n        >\r\n          <Image source={fastforwardIcon} style={styles.playIcon} />\r\n        </TouchableOpacity>\r\n      }\r\n    </>\r\n  );\r\n\r\n  return <View style={[styles.controlsRow]}>{content}</View>;\r\n};\r\n\r\nexport { Controls };\r\n","import React from \"react\";\r\nimport { TouchableOpacity, View, Text, Image, ViewStyle } from \"react-native\";\r\nimport RNSlider from \"react-native-slider\";\r\nimport styles from \"./MediaControls.style\";\r\nimport { humanizeVideoDuration } from \"./utils\";\r\nimport { Props as MediaControlsProps } from \"./MediaControls\";\r\nimport { PLAYER_STATES } from \"./constants/playerStates\";\r\n\r\nexport type CustomSliderStyle = {\r\n  containerStyle: ViewStyle;\r\n  trackStyle: ViewStyle;\r\n  thumbStyle: ViewStyle;\r\n};\r\n\r\ntype Props = Pick<\r\n  MediaControlsProps,\r\n  | \"progress\"\r\n  | \"duration\"\r\n  | \"mainColor\"\r\n  | \"onFullScreen\"\r\n  | \"playerState\"\r\n  | \"onSeek\"\r\n  | \"onSeeking\"\r\n  | \"live\"\r\n> & {\r\n  onPause: () => void;\r\n  customSliderStyle?: CustomSliderStyle;\r\n};\r\n\r\nconst fullScreenImage = require(\"./assets/ic_fullscreen.png\");\r\n\r\nconst Slider = (props: Props) => {\r\n  const {\r\n    customSliderStyle,\r\n    duration,\r\n    mainColor,\r\n    onFullScreen,\r\n    onPause,\r\n    progress,\r\n    live,\r\n  } = props;\r\n\r\n  const containerStyle = customSliderStyle?.containerStyle || {};\r\n  const customTrackStyle = customSliderStyle?.trackStyle || {};\r\n  const customThumbStyle = customSliderStyle?.thumbStyle || {};\r\n\r\n  const dragging = (value: number) => {\r\n    const { onSeeking, playerState } = props;\r\n    onSeeking(value);\r\n\r\n    if (playerState === PLAYER_STATES.PAUSED) {\r\n      return;\r\n    }\r\n\r\n    onPause();\r\n  };\r\n\r\n  const seekVideo = (value: number) => {\r\n    props.onSeek(value);\r\n    onPause();\r\n  };\r\n\r\n  console.log('duration', duration, humanizeVideoDuration(duration));\r\n  console.log('progress', progress, humanizeVideoDuration(progress))\r\n\r\n  return (\r\n    <View\r\n      style={[styles.controlsRow, styles.progressContainer, containerStyle]}\r\n    >\r\n      <View style={styles.progressColumnContainer}>\r\n        <View style={[styles.timerLabelsContainer]}>\r\n          <Text style={styles.timerLabel}>\r\n            {humanizeVideoDuration(progress)}\r\n          </Text>\r\n          <Text style={styles.timerLabel}>\r\n            {!live ? humanizeVideoDuration(duration) : 'Live'}\r\n          </Text>\r\n        </View>\r\n        <RNSlider\r\n          style={[styles.progressSlider]}\r\n          onValueChange={dragging}\r\n          onSlidingComplete={seekVideo}\r\n          maximumValue={Math.floor(duration)}\r\n          value={Math.floor(progress)}\r\n          trackStyle={[styles.track, customTrackStyle]}\r\n          thumbStyle={[\r\n            styles.thumb,\r\n            customThumbStyle,\r\n            { borderColor: mainColor },\r\n          ]}\r\n          minimumTrackTintColor={mainColor}\r\n        />\r\n      </View>\r\n      {Boolean(onFullScreen) && (\r\n        <TouchableOpacity\r\n          style={styles.fullScreenContainer}\r\n          onPress={onFullScreen}\r\n        >\r\n          <Image source={fullScreenImage} />\r\n        </TouchableOpacity>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport { Slider };\r\n","import React from \"react\";\r\n\r\ntype Props = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nconst Toolbar = ({ children }: Props) => <>{children}</>;\r\n\r\nexport { Toolbar };\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  View,\r\n  Animated,\r\n  TouchableWithoutFeedback,\r\n  GestureResponderEvent,\r\n  ViewStyle,\r\n} from \"react-native\";\r\nimport styles from \"./MediaControls.style\";\r\nimport { PLAYER_STATES } from \"./constants/playerStates\";\r\nimport { Controls } from \"./Controls\";\r\nimport { Slider, CustomSliderStyle } from \"./Slider\";\r\nimport { Toolbar } from \"./Toolbar\";\r\n\r\nexport type Props = {\r\n  children: React.ReactNode;\r\n  containerStyle: ViewStyle;\r\n  duration: number;\r\n  fadeOutDelay?: number;\r\n  isFullScreen: boolean;\r\n  isLoading: boolean;\r\n  mainColor: string;\r\n  onFullScreen?: (event: GestureResponderEvent) => void;\r\n  onPaused: (playerState: PLAYER_STATES) => void;\r\n  onReplay: () => void;\r\n  onSeek: (value: number) => void;\r\n  onSeeking: (value: number) => void;\r\n  playerState: PLAYER_STATES;\r\n  progress: number;\r\n  showOnStart?: boolean;\r\n  sliderStyle: CustomSliderStyle;\r\n  toolbarStyle: ViewStyle;\r\n  live?: boolean;\r\n};\r\n\r\nconst MediaControls = (props: Props) => {\r\n  const {\r\n    children,\r\n    containerStyle: customContainerStyle = {},\r\n    duration,\r\n    fadeOutDelay = 5000,\r\n    isLoading = false,\r\n    mainColor = \"rgba(12, 83, 175, 0.9)\",\r\n    onFullScreen,\r\n    onReplay: onReplayCallback,\r\n    onSeek,\r\n    onSeeking,\r\n    playerState,\r\n    progress,\r\n    showOnStart = true,\r\n    sliderStyle, // defaults are applied in Slider.tsx\r\n    toolbarStyle: customToolbarStyle = {},\r\n    live = false,\r\n  } = props;\r\n  const { initialOpacity, initialIsVisible } = (() => {\r\n    if (showOnStart) {\r\n      return {\r\n        initialOpacity: 1,\r\n        initialIsVisible: true,\r\n      };\r\n    }\r\n\r\n    return {\r\n      initialOpacity: 0,\r\n      initialIsVisible: false,\r\n    };\r\n  })();\r\n\r\n  const [opacity] = useState(new Animated.Value(initialOpacity));\r\n  const [isVisible, setIsVisible] = useState(initialIsVisible);\r\n\r\n  const fadeOutControls = (delay = 0) => {\r\n    Animated.timing(opacity, {\r\n      toValue: 0,\r\n      duration: 300,\r\n      delay,\r\n      useNativeDriver: false,\r\n    }).start(result => {\r\n      /* I noticed that the callback is called twice, when it is invoked and when it completely finished\r\n      This prevents some flickering */\r\n      if (result.finished) {\r\n        setIsVisible(false);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      fadeOutControls(fadeOutDelay);\r\n    }\r\n  }, [isLoading]);\r\n\r\n  const fadeInControls = (loop = true) => {\r\n    setIsVisible(true);\r\n    Animated.timing(opacity, {\r\n      toValue: 1,\r\n      duration: 300,\r\n      delay: 0,\r\n      useNativeDriver: false,\r\n    }).start(() => {\r\n      if (loop) {\r\n        fadeOutControls(fadeOutDelay);\r\n      }\r\n    });\r\n  };\r\n\r\n  const onReplay = () => {\r\n    fadeOutControls(fadeOutDelay);\r\n    onReplayCallback();\r\n  };\r\n\r\n  const cancelAnimation = () => opacity.stopAnimation(() => setIsVisible(true));\r\n\r\n  const onPause = () => {\r\n    const { playerState, onPaused } = props;\r\n    const { PLAYING, PAUSED, ENDED } = PLAYER_STATES;\r\n    switch (playerState) {\r\n      case PLAYING: {\r\n        cancelAnimation();\r\n        break;\r\n      }\r\n      case PAUSED: {\r\n        fadeOutControls(fadeOutDelay);\r\n        break;\r\n      }\r\n      case ENDED:\r\n        break;\r\n    }\r\n\r\n    const newPlayerState = playerState === PLAYING ? PAUSED : PLAYING;\r\n    return onPaused(newPlayerState);\r\n  };\r\n\r\n  const toggleControls = () => {\r\n    // value is the last value of the animation when stop animation was called.\r\n    // As this is an opacity effect, I (Charlie) used the value (0 or 1) as a boolean\r\n    opacity.stopAnimation((value: number) => {\r\n      setIsVisible(!!value);\r\n      return value ? fadeOutControls() : fadeInControls();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <TouchableWithoutFeedback accessible={false} onPress={toggleControls}>\r\n      <Animated.View style={[styles.container, { opacity }]}>\r\n        {isVisible && (\r\n          <View style={[styles.container, customContainerStyle]}>\r\n            <View\r\n              style={[\r\n                styles.controlsRow,\r\n                styles.toolbarRow,\r\n                customToolbarStyle,\r\n              ]}\r\n            >\r\n              {children}\r\n            </View>\r\n            <Controls\r\n              onPause={onPause}\r\n              onReplay={onReplay}\r\n              isLoading={isLoading}\r\n              playerState={playerState}\r\n              progress={progress}\r\n              duration={duration}\r\n              live={live}\r\n              onSeek={onSeek}\r\n            />\r\n            <Slider\r\n              progress={progress}\r\n              duration={duration}\r\n              mainColor={mainColor}\r\n              onFullScreen={onFullScreen}\r\n              playerState={playerState}\r\n              onSeek={onSeek}\r\n              onSeeking={onSeeking}\r\n              onPause={onPause}\r\n              customSliderStyle={sliderStyle}\r\n              live={live}\r\n            />\r\n          </View>\r\n        )}\r\n      </Animated.View>\r\n    </TouchableWithoutFeedback>\r\n  );\r\n};\r\n\r\nMediaControls.Toolbar = Toolbar;\r\n\r\nexport default MediaControls;\r\n"],"names":["white","StyleSheet","create","container","alignItems","bottom","flex","flexDirection","justifyContent","left","paddingHorizontal","paddingVertical","position","right","top","controlsRow","alignSelf","fullScreenContainer","paddingLeft","marginBottom","playButton","height","width","playIcon","resizeMode","progressColumnContainer","progressContainer","progressSlider","replayIcon","thumb","backgroundColor","borderRadius","borderWidth","timeRow","timerLabel","color","fontSize","timerLabelsContainer","toolbar","toolbarRow","track","PLAYER_STATES","humanizeVideoDuration","seconds","begin","end","date","Date","setSeconds","toISOString","substr","getPlayerStateIcon","playerState","PAUSED","require","PLAYING","ENDED","rewindIcon","fastforwardIcon","Controls","props","isLoading","onReplay","onPause","duration","progress","onSeek","live","icon","pressAction","ffTenSeconds","availableDuration","rwTenSeconds","content","React","ActivityIndicator","size","TouchableOpacity","style","styles","onPress","accessibilityLabel","accessibilityHint","Image","source","View","fullScreenImage","Slider","customSliderStyle","mainColor","onFullScreen","containerStyle","customTrackStyle","trackStyle","customThumbStyle","thumbStyle","dragging","value","onSeeking","seekVideo","console","log","Text","RNSlider","onValueChange","onSlidingComplete","maximumValue","Math","floor","borderColor","minimumTrackTintColor","Boolean","Toolbar","children","MediaControls","customContainerStyle","fadeOutDelay","onReplayCallback","showOnStart","sliderStyle","toolbarStyle","customToolbarStyle","initialOpacity","initialIsVisible","useState","Animated","Value","opacity","isVisible","setIsVisible","fadeOutControls","delay","timing","toValue","useNativeDriver","start","result","finished","useEffect","fadeInControls","loop","cancelAnimation","stopAnimation","onPaused","newPlayerState","toggleControls","TouchableWithoutFeedback","accessible"],"mappings":"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"}